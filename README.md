# TwitchMan Autonomous World

A **stream-ready autonomous world** simulation built in Godot 4 with LLM-powered social interactions. Characters perceive, plan, and socially interact in a deterministic, data-driven environment.

## ğŸ¯ Project Goals

- **Autonomous NPCs**: Characters that think, feel, and interact without player input
- **LLM-Powered Dialogue**: Dynamic conversations generated by local LLM via LM Studio
- **Social Simulation**: Complex relationships, moods, and social dynamics
- **Stream-Ready**: Engaging content for streaming with console-based influence
- **Deterministic**: Reproducible simulation for debugging and replay

## ğŸš€ Features

### Core Systems
- **EventBus**: Central pub/sub system for all world events
- **LLMClient**: LM Studio integration with fallback responses
- **Console Interface**: Real-time command system for streamers
- **Social Simulation**: Mood, relationships, and conversation management

### Console Commands
- `:event <type> [data]` - Trigger world events
- `:conversation <npc1> <npc2> [topic]` - Start conversations between NPCs
- `:topic <topic> [reason]` - Change conversation topics
- `:inject <conversation_id> <topic>` - Inject topics into conversations
- `:merge <group1_id> <group2_id>` - Merge conversation groups
- `:needs <npc_id> <command> [args...]` - Manage NPC social needs
- `:proximity <npc_id> <command> [args...]` - Manage NPC proximity and invitations
- `:move <npc_id> <x> <y>` - Move NPCs around
- `:emote <npc_id> <emotion>` - Make NPCs express emotions
- `:status [detailed]` - Show system health and stats
- `:help [command]` - Display available commands

## ğŸ› ï¸ Tech Stack

- **Engine**: Godot 4.x
- **Language**: GDScript
- **LLM**: LM Studio (local)
- **Architecture**: Event-driven, component-based
- **Rendering**: 2D top-down (PokÃ©mon-style)

## ğŸ“ Project Structure

```
/
â”œâ”€â”€ autoload/           # Global systems (EventBus, LLMClient)
â”œâ”€â”€ components/         # NPC components (Dialogue, Needs, Proximity)
â”œâ”€â”€ controllers/        # System controllers (Conversation, Topic, Floor)
â”œâ”€â”€ data/              # JSON configurations and templates
â”œâ”€â”€ scenes/            # Main scenes (World, NPC)
â”œâ”€â”€ ui/                # User interface (Console, Dialogue bubbles)
â”œâ”€â”€ debug/             # Debug tools and UIs
â””â”€â”€ project.godot      # Godot project configuration
```

## ğŸš€ Getting Started

### Prerequisites
1. **Godot 4.x** installed
2. **LM Studio** running locally (optional, has fallbacks)

### Installation
1. Clone this repository
2. Open `project.godot` in Godot
3. Run the project

### LM Studio Setup (Optional)
1. Install [LM Studio](https://lmstudio.ai/)
2. Download a model (Mistral, Llama, etc.)
3. Start local server on port 1234
4. The system will automatically detect and use it

## ğŸ® Usage

### For Streamers
- **Observe**: Watch autonomous NPCs interact naturally
- **Influence**: Use console commands to guide the world
- **React**: Respond to unexpected social dynamics
- **Engage**: Let viewers suggest commands and events

### Console Examples
```bash
# Start a conversation
:conversation alice bob weather

# Create weather event
:event weather rain intensity=heavy

# Change conversation topic
:topic politics recent_election

# Inject topic into conversation
:inject group_123 local_news

# Merge conversation groups
:merge group_123 group_456

# Move NPC to specific location
:move alice 150 200

# Make NPC express emotion
:emote bob excited

# Check system status
:status detailed

# Manage NPC social needs
:needs alice status
:needs bob set_need 0.8
:needs charlie set_extroversion 0.9

# Manage NPC proximity and invitations
:proximity alice nearby
:proximity bob status
:proximity charlie invite david
```

## ğŸ”§ Development

### Milestones
- **M2.5**: âœ… LLM wiring and fallback (COMPLETED)
- **M2.7**: âœ… Multi-party conversation system (COMPLETED)
- **M2.8**: âœ… Social simulation model and proximity (COMPLETED)
- **M3.0**: âœ… Character status management and basic actions (COMPLETED - Sprint 3)
- **M4.0**: âœ… Action system and planning (COMPLETED - Sprint 4)
- **M4.5**: â³ Environmental integration and advanced behaviors

### Current Status
- âœ… Project structure created
- âœ… EventBus autoload implemented
- âœ… LLMClient with fallback responses
- âœ… Console interface with commands
- âœ… Basic World scene and simulation loop
- âœ… Configuration files and templates
- âœ… **Conversation system fully implemented**
- âœ… **ContextPacker for LLM context building**
- âœ… **TopicManager for dynamic topic switching**
- âœ… **FloorManager for turn-taking and interrupts**
- âœ… **ConversationController for group orchestration**
- âœ… **DialogueComponent for NPC dialogue display**
- âœ… **NeedsComponent for social simulation model**
- âœ… **ProximityAgent for proximity-based interactions**
- âœ… **StatusComponent for comprehensive character status management**
- âœ… **ActionPlanner for intelligent action selection**
- âœ… **ActionExecutor for action lifecycle management**

### Next Steps
1. âœ… Implement conversation system components (COMPLETED)
2. Add NPC movement and interaction
3. âœ… Build social simulation model (COMPLETED)
4. Create dialogue bubble UI
5. âœ… Add more console commands (COMPLETED)

## ğŸ¨ Design Principles

- **Deterministic**: Same inputs always produce same outputs
- **Data-Driven**: Configuration through JSON files
- **Modular**: Components can be added/removed easily
- **Performance**: Optimized for streaming (60 FPS target)
- **Fallback**: Graceful degradation when LLM unavailable

## ğŸ¤ Contributing

This is a personal project, but suggestions and feedback are welcome!

## ğŸ“ License

Personal project - not for commercial use.

## ğŸ¯ Roadmap

### Short Term
- [ ] Basic NPC movement and interaction
- [ ] Simple conversation system
- [ ] Mood and relationship tracking

### Medium Term
- [ ] Advanced social dynamics
- [ ] World events and weather
- [ ] Streamer tools and overlays

### Long Term
- [ ] Multiple locations and environments
- [ ] Complex storylines and quests
- [ ] Viewer interaction systems

---

**Built with â¤ï¸ for autonomous storytelling and social simulation**
